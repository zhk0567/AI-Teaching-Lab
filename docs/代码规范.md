# 代码规范文档

## 文件大小限制

✅ **所有代码文件均不超过500行**

| 文件 | 行数 | 状态 |
|------|------|------|
| start.py | 188 | ✅ |
| server.js | 105 | ✅ |
| cplus.html | 106 | ✅ |
| styles.css | 54 | ✅ |
| config.js | 52 | ✅ |
| state.js | 54 | ✅ |
| utils.js | 68 | ✅ |
| resizer.js | 72 | ✅ |
| api.js | 70 | ✅ |
| messages.js | 149 | ✅ |
| main.js | 143 | ✅ |
| ui.js | 222 | ✅ |

## 代码规范

### Python代码（PEP 8基础）

- ✅ 使用4个空格缩进
- ✅ 函数和类使用文档字符串
- ✅ 常量使用大写字母
- ✅ 函数名使用小写字母和下划线
- ✅ 每行不超过79个字符（适当放宽）
- ✅ 导入语句按标准库、第三方库、本地模块分组

### JavaScript代码（阿里规范基础）

- ✅ 使用2个空格缩进
- ✅ 使用单引号（字符串中需要时使用双引号）
- ✅ 函数和对象使用JSDoc注释
- ✅ 使用const/let，避免var
- ✅ 函数名使用驼峰命名
- ✅ 常量使用大写字母和下划线
- ✅ 模块化设计，单一职责原则

### HTML/CSS规范

- ✅ HTML语义化标签
- ✅ CSS类名使用Tailwind CSS规范
- ✅ 自定义样式独立到CSS文件
- ✅ 遵循良好的视觉准则

## 代码复用

### 已实现的复用方法

1. **Utils模块** - 通用工具函数
   - `getElement()` - 获取DOM元素
   - `scrollToBottom()` - 滚动到底部
   - `createElement()` - 创建DOM元素
   - `hasUnmodifiedPlaceholder()` - 验证占位符
   - `escapeHtml()` - HTML转义

2. **State模块** - 状态管理
   - 集中管理所有全局状态
   - 提供状态操作方法

3. **Messages模块** - 消息处理
   - 统一的消息创建和显示逻辑
   - 可复用的消息容器创建方法

4. **UI模块** - 界面渲染
   - 统一的UI更新方法
   - 可复用的渲染函数

## 无用代码清理

✅ **已清理的内容：**
- 删除了重复的代码逻辑
- 移除了未使用的变量
- 合并了相似的功能函数
- 优化了事件处理逻辑

## Web页面视觉准则

### 已遵循的准则

1. **响应式设计**
   - 支持不同屏幕尺寸
   - 可调整的左右面板布局

2. **视觉反馈**
   - 悬停效果
   - 过渡动画
   - 状态指示器

3. **可访问性**
   - 语义化HTML
   - 清晰的视觉层次
   - 适当的颜色对比度

4. **用户体验**
   - 流畅的交互动画
   - 即时的状态反馈
   - 友好的错误提示

## 项目结构

```
src/
├── frontend/
│   ├── cplus.html          # 主HTML文件（106行）
│   ├── styles.css          # 样式文件（54行）
│   └── js/
│       ├── config.js       # 配置模块（52行）
│       ├── state.js        # 状态管理（54行）
│       ├── utils.js        # 工具函数（68行）
│       ├── resizer.js      # 分隔条功能（72行）
│       ├── api.js          # API调用（70行）
│       ├── messages.js     # 消息处理（149行）
│       ├── ui.js           # UI渲染（222行）
│       └── main.js         # 主逻辑（143行）
└── backend/
    └── server.js           # 后端服务器（105行）
```

## 代码质量检查

✅ 所有文件通过linter检查
✅ 无语法错误
✅ 无未使用的变量
✅ 无重复代码
✅ 遵循命名规范

## 维护建议

1. **添加新功能时**
   - 保持文件在500行以内
   - 遵循现有代码风格
   - 使用已有的工具函数

2. **重构代码时**
   - 保持模块化结构
   - 确保代码复用
   - 更新相关文档

3. **性能优化**
   - 避免不必要的DOM操作
   - 使用事件委托
   - 合理使用缓存

